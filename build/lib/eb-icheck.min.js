/* iCheck components for WireBootstrap (2019-03-29) (c) 2014 - 2019 Enterprise Blocks, Inc. License details : //cdn.wirebootstrap.com/libs/license/index.html */!function(){$.fn.ebIcheckList=function(a){function b(){g(function(){i.bindData(d)})}function c(){return{autoInit:!0,skin:"flat",color:"blue",lineUnChecked:{color:null,icon:!0},style:{ul:"eb-icheck-list-ul",li:"eb-icheck-list-li"},events:{itemClick:null}}}function d(){function a(a,c){var d=l&&k.lineUnChecked.color&&!c?k.lineUnChecked.color:k.color,e={checkboxClass:"icheckbox_{0}-{1}".format(k.skin,d),radioClass:"iradio_{0}-{1}".format(k.skin,d)};l&&(e.insert=g.line.format(c||k.lineUnChecked.icon?"":" eb-icheck_line-no-icon")+"<span>label</span>"),a.iCheck(e).on("ifChecked",function(a){b(a,!0,this)}).on("ifUnchecked",function(a){b(a,!1,this)}),a.closest("li").find("span").text(a.val())}function b(b,f,g){l&&k.lineUnChecked.color&&a($(g),f);var i=$(g).val(),m=c.where().eq(d,i).first(),n=e(i,m),o="undefined"!=typeof m[j.selected];f?(o&&(m[j.selected]=!0),n.action().add()):(o&&(m[j.selected]=!1),n.action().remove());var p={base:b,data:n.getData()};if(k.events.itemClick&&k.events.itemClick(p),n.raise(),h.trigger("itemClick",p),c.__meta&&c.__meta.dataset)try{if(this.checked)c.__meta.dataset.Write&&c.__meta.dataset.write(m);else if(0!=c.__meta.dataset.Delete&&c.__meta.dataset.Write){var q=eb.data["delete"]().from(c.__meta.dataset.Query.Entities[0].Name).where().eq(d,i);c.__meta.dataset["delete"](q)}}catch(r){eb.ui.ErrorDialog(r)}}var c=i.data(),d=i.colId(j),g=f();h.empty();var m=$('<ul class="{0}">'.format(k.style.ul));h.append(m),c.Rows.forEach(function(b){var c=eb.toBoolean(b[j.selected],!1),e=$('<li class="{0}">'.format(k.style.li));m.append(e);var f=g.input.format(b[d],c?"checked":""),h=g.label.format("undefined"==typeof b[j.label]?b[j.name]:b[j.label]);e.append(f),l||e.append(h),a(e.find("input"),c)}),i.ready()}function e(a,b){var c=i.data(),d=i.colId(j);return(new eb.data.DataEvent).dataselect().source(h).cell(d,a).column(c.getColumn(d)).row(b).table(c)}function f(){return{input:'<input type="checkbox" value="{0}" {1}>',label:'<label style="padding-left:10px">{0}</label>',line:'<div class="icheck_line-icon{0}"></div>'}}function g(a){"undefined"==typeof $.fn.iCheck?(eb.loadCss({css:"https://cdn.wirebootstrap.com/libs/iCheck/skins/{0}/_all.css?skin={0}".format(k.skin),hidden:"eb-icheck-{0}-hidden".format(k.skin)}),eb.loadJs("https://cdn.wirebootstrap.com/libs/iCheck/js/1.0.2/icheck.min.js?v=1.0.2",a)):a()}var h=this;eb.ui.prependClass(h,"eb-icheck-list eb-plugin");var i=new eb.ui.Component(this,a,c(),(!0)),j=i.updateFieldSchema({id:"Id",name:"Name",label:"Label",selected:"Selected"}),k=i.config(),l="line"==k.skin;return this.clear=function(){var a=k.data;a.Query.where(),a.Query.Paging.Page>1&&a.Query.page(1),a.refresh();var b=e(null,null);b.action().clear().raise()},this.getData=function(){return i.data()},this.config=function(){return k},this.databind=function(){d()},this.initialize=function(){return b(),this},k.autoInit&&b(),this}}(),function(){$.fn.ebIcheckFilter=function(a){function b(){d(function(){c()})}function c(){var a=i.updateFieldSchema({id:"Id",name:"Name"}),b=(i.data(),e()),c=0;f.empty();var d=j.searchTemplate||b.search;d=$(d),f.append($(b.row).append($(b.col).append(d))),d.find("input").keydown(function(b){clearTimeout(c);var d=$(this);c=setTimeout(function(){var b=j.data.Query.where();j.data.Query.Paging.Page>1&&j.data.Query.page(1);var c=d.val();c.length>0&&b.contains(a.name,c),j.data.refresh()},500)}),f.find(".clear-search").click(function(a){d.find("input").val(""),g.clear()}),d.find("input").prop("placeholder","Search "+a.name),j.ebIcheckList.schema=j.schema,j.ebIcheckList.color=j.color,j.ebIcheckList.data=j.data,g=$(b.div).ebIcheckList(j.ebIcheckList),f.append($(b.row).append($(b.col).append(g))),j.paging.data=j.data;var h=$(b.div).ebDatasetPaging(j.paging);f.append($(b.row).append($(b.col).append(h))),i.ready()}function d(a){"undefined"==typeof $.fn.ebDatasetPaging?eb.loadJs("https://cdn.wirebootstrap.com/libs/bootstrap/2.1.0/eb-bootstrap.min.js",a):a()}function e(){return{row:'<div class="row"></div>',col:'<div class="col-md-12"></div>',search:'<div class="input-group"><input placeholder="" class="form-control" /><span class="input-group-addon clear-search"><i class="fa fa-times"></i></span></div>',div:"<div></div>",hr:'<div class="eb-hr"></div>'}}var f=this;eb.ui.prependClass(f,"eb-icheck-filter eb-plugin");var g,h={autoInit:!0,paging:{},color:"green",ebIcheckList:{skin:"line",color:null,lineUnChecked:{color:"default",icon:!1},style:{ul:"eb-icheck-filter-ul",li:"eb-icheck-filter-li"},events:{itemClick:null}}},i=new eb.ui.Component(this,a,h,(!0)),j=i.config();return this.getData=function(){return i.data()},this.config=function(){return j},this.databind=function(a){a&&i.data(a),c()},this.initialize=function(){return b(),this},this.pluginCheckbox=function(){return g},j.autoInit&&b(),this}}();